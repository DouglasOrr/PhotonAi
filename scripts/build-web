#!/bin/bash

LIB="photonai/static/lib"
FONTS="photonai/static/fonts"
MATERIALIZE="node_modules/materialize-css"

set -e

mkdir -p "${LIB}" "${FONTS}"

npm install

# Hack https://github.com/Dogfalo/materialize/issues/3139
cp "${MATERIALIZE}/js/date_picker/picker.js" "${MATERIALIZE}/bin"

browserify scripts/lib.js -o "${LIB}/all.js"

cat "${MATERIALIZE}/dist/css/materialize.min.css" \
    > "${LIB}/all.css"

cp -r ${MATERIALIZE}/dist/fonts/* "${FONTS}/"
